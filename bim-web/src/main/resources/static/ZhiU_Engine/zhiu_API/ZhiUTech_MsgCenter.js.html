<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: ZhiUTech_MsgCenter.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: ZhiUTech_MsgCenter.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 *  创建人 : LJason
 *  功能说明 : 通知中心 及log管理器
 *  @function ZhiUTech_MsgCenter
 *  @return {object} 通知中心句柄
 */
function ZhiUTech_MsgCenter(isOpenLog){
    let mgr={};
    mgr.LogMgr=LogManager(isOpenLog);
    mgr.L_AddListener=function (eventName, action) {
        if(!mgr[eventName]){
            mgr[eventName]=[];
        }
        mgr[eventName].push(action);
        mgr.L_SendMsg("日志",eventName+" 事件添加成功");
    };
    /**
     * 删除监听
     * @function L_RemoveListener
     * @param {string} eventName 消息名
     * @param {function} action 委托
     */
    mgr.L_RemoveListener=function (eventName, action) {
        if(mgr[eventName]){
            if(mgr[eventName].includes(action)){
                let index= mgr[eventName].indexOf(action);
                mgr[eventName].splice(index,1);
                mgr.L_SendMsg("日志","删除事件成功？？？");
            }
        }
    };
    /**
     * 根据消息名删除所有监听
     * @function L_ClearEventWithName
     * @param {string} eventName 消息名
     */
    mgr.L_ClearEventWithName=function (eventName) {
        if(mgr[eventName]){
            mgr[eventName]=null;
            mgr.L_SendMsg("日志",[eventName," 事件全部清空"]);
        }
    };
    /**
     * 发送消息
     * @function L_SendMsg
     * @param {string} eventName 消息名称
     * @param {*} [argsList] 参数列表
     */
    mgr.L_SendMsg=function (eventName, argsList) {
        if(mgr[eventName]){
            let list=mgr[eventName];
            for (let i = 0; i &lt; list.length; i++){
                if(argsList){
                    list[i](argsList);
                }else{
                    list[i]();
                }
            }
        }else{
            mgr.L_SendMsg("警告",eventName+" 该事件未被监听");
        }
    };
    /**
     * 清空所有
     * @function L_ClearAll
     */
    mgr.L_ClearAll=function () {
        mgr={};
    };

    function LogManager(isOpenLog) {
        let mgr={};
        mgr._isOpenLog=isOpenLog;
        mgr._Log=function (msg) {
            if(!mgr._isOpenLog) return;
            if(Array.isArray(msg)){
                for (let i = 0; i &lt; msg.length; i++) {
                    console.log(" >LJason&lt; 日志："+"第"+(i+1)+"条信息 : ",msg[i]);
                }
            }else{
                console.log(" >LJason&lt; 日志：",msg);
            }
        };
        mgr._Warning=function (msg) {
            if(!mgr._isOpenLog) return;
            if(Array.isArray(msg)){
                for (let i = 0; i &lt; msg.length; i++) {
                    console.warn(" >LJason&lt; 警告："+"第"+(i+1)+"条信息 : ",msg[i]);
                }
            }else{
                console.warn(" >LJason&lt; 警告：",msg);
            }
        };
        mgr._Error=function (msg) {
            if(!mgr._isOpenLog) return;
            if(Array.isArray(msg)){
                for (let i = 0; i &lt; msg.length; i++) {
                    console.error(" >LJason&lt; 错误："+"第"+(i+1)+"条信息 : ",msg[i]);
                }
            }else{
                console.error(" >LJason&lt; 错误：",msg);
            }
        };
        return mgr;
    }

    // region 初始化debug
    mgr.L_AddListener("日志",mgr.LogMgr._Log);
    mgr.L_AddListener("警告",mgr.LogMgr._Warning);
    mgr.L_AddListener("错误",mgr.LogMgr._Error);
    // endregion
    return mgr;
}


























































</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#L_ClearAll">L_ClearAll</a></li><li><a href="global.html#L_ClearEventWithName">L_ClearEventWithName</a></li><li><a href="global.html#L_RemoveListener">L_RemoveListener</a></li><li><a href="global.html#L_SendMsg">L_SendMsg</a></li><li><a href="global.html#ZhiUTech_MsgCenter">ZhiUTech_MsgCenter</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Wed Dec 26 2018 14:29:13 GMT+0800 (GMT+08:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
